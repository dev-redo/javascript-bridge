# 🚀 기능 요구 사항

위아래 둘 중 하나의 칸만 건널 수 있는 다리를 끝까지 건너가는 게임이다.

- [] **위아래 두 칸**으로 이루어진 다리를 건너야 한다.
  - [] 다리는 **왼쪽에서 오른쪽**으로 건너야 한다.
  - [] **위아래 둘 중 하나의 칸**만 건널 수 있다.
- [] **다리의 길이를 숫자로 입력받고 생성**한다.
  - [] 다리를 생성할 때 **위 칸과 아래 칸 중 건널 수 있는 칸은 0과 1 중 무작위 값**을 이용해서 정한다
  - [] **위 칸을 건널 수 있는 경우 U**, **아래 칸을 건널 수 있는 경우 D값**으로 나타낸다.
  - [] **무작위 값이 0인 경우 아래 칸, 1인 경우 위 칸**이 건널 수 있는 칸이 된다.
- [] 다리가 생성되면 **플레이어가 이동할 칸**을 선택한다.
  - [] 이동할 때 **위 칸은 대문자 U, 아래 칸은 대문자 D**를 입력한다.
  - [] **이동한 칸을 건널 수 있다면 O**로 표시한다. **건널 수 없다면 X**로 표시한다.
- [] 다리를 **끝까지 건너면 게임이 종료**된다.
- [] **다리를 건너다 실패하면 게임을 재시작하거나 종료**할 수 있다.
  - [] **재시작해도 처음에 만든 다리로 재사용**한다.
  - [] 게임 결과의 총 시도한 횟수는 첫 시도를 포함해 게임을 종료할 때까지 시도한 횟수((를 나타낸다.
- [] 사용자가 잘못된 값을 입력한 경우 **throw문을 사용해 예외를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시** 받는다.

## 입출력 요구 사항

### 입력

- [] 자동으로 생성할 다리 길이를 입력 받는다. 3 이상 20 이하의 숫자를 입력할 수 있으며 올바른 값이 아니면 예외 처리한다.

```
3
```

- [] 라운드마다 플레이어가 이동할 칸을 입력 받는다. U(위 칸)와 D(아래 칸) 중 하나의 문자를 입력할 수 있으며 올바른 값이 아니면 예외 처리한다.

```
U
```

- [] 게임 재시작/종료 여부를 입력 받는다. R(재시작)과 Q(종료) 중 하나의 문자를 입력할 수 있으며 올바른 값이 아니면 예외 처리한다.

```
R
```

### 출력

- [] 게임 시작 문구

```
다리 건너기 게임을 시작합니다.
```

- [] 게임 종료 문구

```
최종 게임 결과
[ O | | ]
[ | O | O ]

게임 성공 여부: 성공
총 시도한 횟수: 2
```

- [] 사용자가 이동할 때마다 다리 건너기 결과의 출력 형식은 실행 결과 예시를 참고한다.
  - [] 이동할 수 있는 칸을 선택한 경우 O 표시
  - [] 이동할 수 없는 칸을 선택한 경우 X 표시
  - [] 선택하지 않은 칸은 공백 한 칸으로 표시
  - [] 다리의 시작은 [, 다리의 끝은 ]으로 표시
  - [] 다리 칸의 구분은 |(앞뒤 공백 포함) 문자열로 구분
  - [] 현재까지 건넌 다리를 모두 출력
  - [] 예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 "[ERROR]"로 시작해야 한다.
  ```
  [ERROR] 다리 길이는 3부터 20 사이의 숫자여야 합니다.
  ```

### 실행 결과 예시

```
다리 건너기 게임을 시작합니다.

다리의 길이를 입력해주세요.
3

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O ]
[ ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O | X ]
[ | ]

게임을 다시 시도할지 여부를 입력해주세요. (재시도: R, 종료: Q)
R
이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O ]
[ ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
D
[ O | ]
[ | O ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
D
[ O | | ]
[ | O | O ]

최종 게임 결과
[ O | | ]
[ | O | O ]

게임 성공 여부: 성공
총 시도한 횟수: 2
다리 건너기 게임을 시작합니다.

다리의 길이를 입력해주세요.
3

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O ]
[ ]

이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O | X ]
[ | ]

게임을 다시 시도할지 여부를 입력해주세요. (재시도: R, 종료: Q)
Q
최종 게임 결과
[ O | X ]
[ | ]

게임 성공 여부: 실패
총 시도한 횟수: 1
```

## 애플리케이션 Flow

1. 다리 건너기 게임 시작 문구 띄우기

```
다리 건너기 게임을 시작합니다.
```

2. 사용자로부터 다리 길이를 입력받는다.

```
다리의 길이를 입력해주세요.
3
```

3. 입력 받은 다리 길이만큼 무작위 값을 생성해 다리를 생성한다.
   다리는 위 칸과 아래 칸 중 건널 수 있는 칸은 0과 1 중 무작위 값을 이용해서 생성한다.
   이 때 0(위 칸)은 U, 1(아래 칸)은 D로 변경한다.

```
// EX. 1 0 1
-> D U D
```

4. 사용자로부터 이동할 칸을 입력받는다.
   위는 U, 아래는 D이다.

   ```
   이동할 칸을 선택해주세요. (위: U, 아래: D)
   U
   [ O ]
   [   ]
   ```

4.1. 이번에 입력한 U, D가 사다리의 칸의 값과 다를 때 게임 종료 후 재시작 여부를 묻는다.
즉 이번에 들어온 값과 사용자의 position에 해당되는 사다리의 칸이 다를 경우 게임이 종료된다.

```
이동할 칸을 선택해주세요. (위: U, 아래: D)
U
[ O | X ]
[   |   ]

게임을 다시 시도할지 여부를 입력해주세요. (재시도: R, 종료: Q)
R
```

4.2. 게임을 재시작할 시 총 시도 횟수를 +1 한다.

5. 성공적으로 다리 길이만큼 이동을 했다면 게임은 성공한다.

- 다리 출력
- 게임 성공 여부: 성공 / 총 시도 횟수 출력

# 모듈

## BridgeView

게임 입출력 담당 (InputView, OutputView 로직 위임)

### 1. InputView

- [x] 다리 길이 입력 readBridgeSize
- [x] 이동할 칸 입력 readMoving
- [x] 게임 재시작 여부 입력 readGameCommand

### 2. OutputView

- [x] 게임 시작 메세지
- [x] 현재까지 이동한 다리의 상태 출력 printMap
- [x] 게임의 최종 결과를 정해진 형식에 맞춰 출력 printResult

## BridgeMaker

다리 생성 모듈

- 사용자로부터 입력받은 다리 길이만큼 다리 생성
- 무작위로 0과 1을 입력받으면 이를 U, D로 변경해 다리 배열 생성

## BridgeGame

게임 프로세스 담당

- [x] 게임 시작 start
- [] 다리 건너기 move
- [] 게임 재시작 여부 묻기 quitOrRetryByCommand
- [] 게임 재시작 retry
- [] 게임 종료 exit
- [] 최종 결과 출력 하기 end

## BridgeModel

게임 모델

- 필드

  - 시도 횟수 tryCount
  - 정답 다리 answerBridge
    - ex. [U, D, U, D]
  - 사용자가 현재까지 건넌 다리 상태 userBridge
    - ex. [U, D, U]
  - 사용자의 position

- [x] 다리 생성 makeBridge
- [] 게임 최초 상태 세팅 initBridgeGameStatus
- [] 게임 결과 만들기 makeMovedResult
- [] 게임 최종 결과 만들기 makeFinalResult
- [] 게임 실패 여부 판별 checkIsFailed
- [] 게임 재시작 시 상태 변경 setStatusForNextGame
  - 1. tryCount + 1
  - 2. userBridge = []
- [] 유저 position 변경 setUserPosition
  - 1. position + 1
  - 2. userBridge.push(현재 칸)

## BridgeMap

- [] 현재 유저의 다리 상태 출력
  - input: position / answerBridge / userBridge
  - output: 현재 유저 다리 상태

## Validator

유효성 검사

### 1. SizeValidator

다리 길이 유효성 검사

- [x] 숫자 여부
- [x] 3과 20 사이 여부

### 2. CommandValidator

사용자로부터 칸 입력 받기 (U or D)

- [x] U or D를 입력받았는지 여부

### 3. ReplayValidator

- [x] 재시작 여부를 물을 시 R or Q 입력 여부
